<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class HighLine::Menu - HighLine Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
</script>

<script src="../js/jquery.js"></script>
<script src="../js/darkfish.js"></script>

<link href="../css/fonts.css" rel="stylesheet">
<link href="../css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../table_of_contents.html#pages">Pages</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link">Question
  
</div>

    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li class="calls-super" ><a href="#method-c-new">::new</a>
    
    <li ><a href="#method-i-choice">#choice</a>
    
    <li ><a href="#method-i-choices">#choices</a>
    
    <li ><a href="#method-i-help">#help</a>
    
    <li ><a href="#method-i-hidden">#hidden</a>
    
    <li ><a href="#method-i-index-3D">#index=</a>
    
    <li ><a href="#method-i-init_help">#init_help</a>
    
    <li ><a href="#method-i-layout-3D">#layout=</a>
    
    <li ><a href="#method-i-options">#options</a>
    
    <li ><a href="#method-i-select">#select</a>
    
    <li ><a href="#method-i-to_ary">#to_ary</a>
    
    <li ><a href="#method-i-to_s">#to_s</a>
    
    <li ><a href="#method-i-update_responses">#update_responses</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-HighLine::Menu">
  <h1 id="class-HighLine::Menu" class="class">
    class HighLine::Menu
  </h1>

  <section class="description">
    
<p><a href="Menu.html">Menu</a> objects encapsulate all the details of a call
to HighLine.choose(). Using the accessors and <a
href="Menu.html#method-i-choice">#choice</a> and <a
href="Menu.html#method-i-choices">#choices</a>, the block passed to
HighLine.choose() can detail all aspects of menu display and control.</p>

  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    
    <section class="attribute-method-details" class="method-section">
      <header>
        <h3>Attributes</h3>
      </header>

      
      <div id="attribute-i-flow" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">flow</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <p>This attribute is passed directly on as the mode to HighLine.list() by all
the preset layouts.  See that method for appropriate settings.</p>
        
        </div>
      </div>
      
      <div id="attribute-i-header" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">header</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <p>Used by all the preset layouts to display title and/or introductory
information, when set.  Defaults to <code>nil</code>.</p>
        
        </div>
      </div>
      
      <div id="attribute-i-index" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">index</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>An <em>index</em> to append to each menu item in display.  See <a
href="Menu.html#method-i-index-3D">#index=</a> for details.</p>
        
        </div>
      </div>
      
      <div id="attribute-i-index_suffix" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">index_suffix</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <p>The <a href="../String.html">String</a> placed between an <em>index</em>
and a menu item.  Defaults to “. ”.  Switches to “ ”, when <em>index</em>
is set to a <a href="../String.html">String</a> (like “-”).</p>
        
        </div>
      </div>
      
      <div id="attribute-i-layout" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">layout</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>An ERb <em>layout</em> to use when displaying this <a
href="Menu.html">Menu</a> object.  See <a
href="Menu.html#method-i-layout-3D">#layout=</a> for details.</p>
        
        </div>
      </div>
      
      <div id="attribute-i-list_option" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">list_option</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <p>This setting is passed on as the third parameter to HighLine.list() by all
the preset layouts.  See that method for details of its effects.  Defaults
to <code>nil</code>.</p>
        
        </div>
      </div>
      
      <div id="attribute-i-nil_on_handled" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">nil_on_handled</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <p>When <code>true</code>, any selected item handled by provided action code
will return <code>nil</code>, instead of the results to the action code. 
This may prove handy when dealing with mixed menus where only the names of
items without any code (and <code>nil</code>, of course) will be returned.
Defaults to <code>false</code>.</p>
        
        </div>
      </div>
      
      <div id="attribute-i-prompt" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">prompt</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <p>Used by all the preset layouts to ask the actual question to fetch a menu
selection from the user.  Defaults to “?  ”.</p>
        
        </div>
      </div>
      
      <div id="attribute-i-select_by" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">select_by</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <p>The <em>select_by</em> attribute controls how the user is allowed to pick a
menu item.  The available choices are:</p>
<dl class="rdoc-list note-list"><dt><code>:index</code>
<dd>
<p>The user is allowed to type the numerical or alphabetical index for their
selection.</p>
</dd><dt><code>:index_or_name</code>
<dd>
<p>Allows both methods from the <code>:index</code> option and the
<code>:name</code> option.</p>
</dd><dt><code>:name</code>
<dd>
<p><a href="Menu.html">Menu</a> items are selected by typing a portion of the
item name that will be auto-completed.</p>
</dd></dl>
        
        </div>
      </div>
      
      <div id="attribute-i-shell" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">shell</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <p>When set to <code>true</code>, responses are allowed to be an entire line
of input, including details beyond the command itself.  Only the first
“word” of input will be matched against the menu choices, but both the
command selected and the rest of the line will be passed to provided action
blocks.  Defaults to <code>false</code>.</p>
        
        </div>
      </div>
      
    </section>
    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">( ) { |self| ... }</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Create an instance of <a href="Menu.html">HighLine::Menu</a>.  All
customization is done through the passed block, which should call accessors
and choice() and choices() as needed to define the <a
href="Menu.html">Menu</a>.  Note that Menus are also Questions, so all that
functionality is available to the block as well.</p>
          
          
            <div class="method-calls-super">
              Calls superclass method
              
            </div>
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File lib/highline/menu.rb, line 24</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(  )
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># Initialize Question objects with ignored values, we&#39;ll</span>
  <span class="ruby-comment"># adjust ours as needed.</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">super</span>(<span class="ruby-string">&quot;Ignored&quot;</span>, [ ], <span class="ruby-operator">&amp;</span><span class="ruby-keyword">nil</span>)    <span class="ruby-comment"># avoiding passing the block along</span>

  <span class="ruby-ivar">@items</span>           = [ ]
  <span class="ruby-ivar">@hidden_items</span>    = [ ]
  <span class="ruby-ivar">@help</span>            = <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;There&#39;s no help for that topic.&quot;</span>)

  <span class="ruby-ivar">@index</span>           = <span class="ruby-value">:number</span>
  <span class="ruby-ivar">@index_suffix</span>    = <span class="ruby-string">&quot;. &quot;</span>
  <span class="ruby-ivar">@select_by</span>       = <span class="ruby-value">:index_or_name</span>
  <span class="ruby-ivar">@flow</span>            = <span class="ruby-value">:rows</span>
  <span class="ruby-ivar">@list_option</span>     = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@header</span>          = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@prompt</span>          = <span class="ruby-string">&quot;?  &quot;</span>
  <span class="ruby-ivar">@layout</span>          = <span class="ruby-value">:list</span>
  <span class="ruby-ivar">@shell</span>           = <span class="ruby-keyword">false</span>
  <span class="ruby-ivar">@nil_on_handled</span>  = <span class="ruby-keyword">false</span>

  <span class="ruby-comment"># Override Questions responses, we&#39;ll set our own.</span>
  <span class="ruby-ivar">@responses</span>       = { }
  <span class="ruby-comment"># Context for action code.</span>
  <span class="ruby-ivar">@highline</span>        = <span class="ruby-keyword">nil</span>

  <span class="ruby-keyword">yield</span> <span class="ruby-keyword">self</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>

  <span class="ruby-identifier">init_help</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@shell</span> <span class="ruby-keyword">and</span> <span class="ruby-keyword">not</span> <span class="ruby-ivar">@help</span>.<span class="ruby-identifier">empty?</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-choice" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">choice</span><span
            class="method-args">( name, help = nil, &action )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Adds <em>name</em> to the list of available menu items.  <a
href="Menu.html">Menu</a> items will be displayed in the order they are
added.</p>

<p>An optional <em>action</em> can be associated with this name and if
provided, it will be called if the item is selected.  The result of the
method will be returned, unless <em>nil_on_handled</em> is set (when you
would get <code>nil</code> instead).  In <em>shell</em> mode, a provided
block will be passed the command chosen and any details that followed the
command.  Otherwise, just the command is passed.  The
<code>@highline</code> variable is set to the current <a
href="HighLine.html">HighLine</a> context before the action code is called
and can thus be used for adding output and the like.</p>
          
          

          
          <div class="method-source-code" id="choice-source">
            <pre><span class="ruby-comment"># File lib/highline/menu.rb, line 136</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">choice</span>( <span class="ruby-identifier">name</span>, <span class="ruby-identifier">help</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">action</span> )
  <span class="ruby-ivar">@items</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-identifier">name</span>, <span class="ruby-identifier">action</span>]

  <span class="ruby-ivar">@help</span>[<span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">downcase</span>] = <span class="ruby-identifier">help</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">help</span>.<span class="ruby-identifier">nil?</span>
  <span class="ruby-identifier">update_responses</span>  <span class="ruby-comment"># rebuild responses based on our settings</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-choices" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">choices</span><span
            class="method-args">( *names, &action )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>A shortcut for multiple calls to the sister method choice().  <strong>Be
warned:</strong>  An <em>action</em> set here will apply to
<strong>all</strong> provided <em>names</em>.  This is considered to be a
feature, so you can easily hand-off interface processing to a different
chunk of code.</p>
          
          

          
          <div class="method-source-code" id="choices-source">
            <pre><span class="ruby-comment"># File lib/highline/menu.rb, line 149</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">choices</span>( <span class="ruby-operator">*</span><span class="ruby-identifier">names</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">action</span> )
  <span class="ruby-identifier">names</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">n</span><span class="ruby-operator">|</span> <span class="ruby-identifier">choice</span>(<span class="ruby-identifier">n</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">action</span>) }
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-help" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">help</span><span
            class="method-args">( topic, help )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Used to set help for arbitrary topics.  Use the topic
<code>&quot;help&quot;</code> to override the default message.</p>
          
          

          
          <div class="method-source-code" id="help-source">
            <pre><span class="ruby-comment"># File lib/highline/menu.rb, line 214</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">help</span>( <span class="ruby-identifier">topic</span>, <span class="ruby-identifier">help</span> )
  <span class="ruby-ivar">@help</span>[<span class="ruby-identifier">topic</span>] = <span class="ruby-identifier">help</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-hidden" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">hidden</span><span
            class="method-args">( name, help = nil, &action )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Identical to choice(), but the item will not be listed for the user.</p>
          
          

          
          <div class="method-source-code" id="hidden-source">
            <pre><span class="ruby-comment"># File lib/highline/menu.rb, line 154</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">hidden</span>( <span class="ruby-identifier">name</span>, <span class="ruby-identifier">help</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">action</span> )
  <span class="ruby-ivar">@hidden_items</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-identifier">name</span>, <span class="ruby-identifier">action</span>]

  <span class="ruby-ivar">@help</span>[<span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">downcase</span>] = <span class="ruby-identifier">help</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">help</span>.<span class="ruby-identifier">nil?</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-index-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">index=</span><span
            class="method-args">( style )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Sets the indexing style for this <a href="Menu.html">Menu</a> object. 
Indexes are appended to menu items, when displayed in list form.  The
available settings are:</p>
<dl class="rdoc-list note-list"><dt><code>:number</code>
<dd>
<p><a href="Menu.html">Menu</a> items will be indexed numerically, starting
with 1.  This is the default method of indexing.</p>
</dd><dt><code>:letter</code>
<dd>
<p>Items will be indexed alphabetically, starting with a.</p>
</dd><dt><code>:none</code>
<dd>
<p>No index will be appended to menu items.</p>
</dd><dt><em>any <a href="../String.html">String</a></em>
<dd>
<p>Will be used as the literal <em>index</em>.</p>
</dd></dl>

<p>Setting the <em>index</em> to <code>:none</code> or a literal <a
href="../String.html">String</a> also adjusts <em>index_suffix</em> to a
single space and <em>select_by</em> to <code>:name</code>. Because of this,
you should make a habit of setting the <em>index</em> first.</p>
          
          

          
          <div class="method-source-code" id="index-3D-source">
            <pre><span class="ruby-comment"># File lib/highline/menu.rb, line 175</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">index=</span>( <span class="ruby-identifier">style</span> )
  <span class="ruby-ivar">@index</span> = <span class="ruby-identifier">style</span>

  <span class="ruby-comment"># Default settings.</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@index</span> <span class="ruby-operator">==</span> <span class="ruby-value">:none</span> <span class="ruby-keyword">or</span> <span class="ruby-ivar">@index</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-operator">::</span><span class="ruby-constant">String</span>)
    <span class="ruby-ivar">@index_suffix</span> = <span class="ruby-string">&quot; &quot;</span>
    <span class="ruby-ivar">@select_by</span>    = <span class="ruby-value">:name</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-init_help" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">init_help</span><span
            class="method-args">( )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Initializes the help system by adding a <code>:help</code> choice, some
action code, and the default help listing.</p>
          
          

          
          <div class="method-source-code" id="init_help-source">
            <pre><span class="ruby-comment"># File lib/highline/menu.rb, line 189</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">init_help</span>(  )
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@items</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value">:help</span>)

  <span class="ruby-identifier">topics</span>    = <span class="ruby-ivar">@help</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">sort</span>
  <span class="ruby-identifier">help_help</span> = <span class="ruby-ivar">@help</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">&quot;help&quot;</span>) <span class="ruby-operator">?</span> <span class="ruby-ivar">@help</span>[<span class="ruby-string">&quot;help&quot;</span>] <span class="ruby-operator">:</span>
              <span class="ruby-string">&quot;This command will display helpful messages about &quot;</span> <span class="ruby-operator">+</span>
              <span class="ruby-string">&quot;functionality, like this one.  To see the help for &quot;</span> <span class="ruby-operator">+</span>
              <span class="ruby-string">&quot;a specific topic enter:\n\thelp [TOPIC]\nTry asking &quot;</span> <span class="ruby-operator">+</span>
              <span class="ruby-string">&quot;for help on any of the following:\n\n&quot;</span> <span class="ruby-operator">+</span>
              <span class="ruby-node">&quot;&lt;%= list(#{topics.inspect}, :columns_across) %&gt;&quot;</span>
  <span class="ruby-identifier">choice</span>(<span class="ruby-value">:help</span>, <span class="ruby-identifier">help_help</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">command</span>, <span class="ruby-identifier">topic</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">strip!</span>
    <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">downcase!</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">empty?</span>
      <span class="ruby-ivar">@highline</span>.<span class="ruby-identifier">say</span>(<span class="ruby-ivar">@help</span>[<span class="ruby-string">&quot;help&quot;</span>])
    <span class="ruby-keyword">else</span>
      <span class="ruby-ivar">@highline</span>.<span class="ruby-identifier">say</span>(<span class="ruby-node">&quot;= #{topic}\n\n#{@help[topic]}&quot;</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-layout-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">layout=</span><span
            class="method-args">( new_layout )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Setting a <em>layout</em> with this method also adjusts some other
attributes of the <a href="Menu.html">Menu</a> object, to ideal defaults
for the chosen <em>layout</em>.  To account for that, you probably want to
set a <em>layout</em> first in your configuration block, if needed.</p>

<p>Accepted settings for <em>layout</em> are:</p>
<dl class="rdoc-list note-list"><dt><code>:list</code>
<dd>
<p>The default <em>layout</em>.  The <em>header</em> if set will appear at the
top on its own line with a trailing colon.  Then the list of menu items
will follow.  Finally, the <em>prompt</em> will be used as the ask()-like
question.</p>
</dd><dt><code>:one_line</code>
<dd>
<p>A shorter <em>layout</em> that fits on one line. The <em>header</em> comes
first followed by a colon and spaces, then the <em>prompt</em> with menu
items between trailing parenthesis.</p>
</dd><dt><code>:menu_only</code>
<dd>
<p>Just the menu items, followed up by a likely short <em>prompt</em>.</p>
</dd><dt><em>any ERb <a href="../String.html">String</a></em>
<dd>
<p>Will be taken as the literal <em>layout</em>.  This <a
href="../String.html">String</a> can access <code>@header</code>,
<code>@menu</code> and <code>@prompt</code>, but is otherwise evaluated in
the typical <a href="HighLine.html">HighLine</a> context, to provide access
to utilities like HighLine.list() primarily.</p>
</dd></dl>

<p>If set to either <code>:one_line</code>, or <code>:menu_only</code>,
<em>index</em> will default to <code>:none</code> and <em>flow</em> will
default to <code>:inline</code>.</p>
          
          

          
          <div class="method-source-code" id="layout-3D-source">
            <pre><span class="ruby-comment"># File lib/highline/menu.rb, line 248</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">layout=</span>( <span class="ruby-identifier">new_layout</span> )
  <span class="ruby-ivar">@layout</span> = <span class="ruby-identifier">new_layout</span>

  <span class="ruby-comment"># Default settings.</span>
  <span class="ruby-keyword">case</span> <span class="ruby-ivar">@layout</span>
  <span class="ruby-keyword">when</span> <span class="ruby-value">:one_line</span>, <span class="ruby-value">:menu_only</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">index</span> = <span class="ruby-value">:none</span>
    <span class="ruby-ivar">@flow</span>  = <span class="ruby-value">:inline</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-options" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">options</span><span
            class="method-args">( )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>This method returns all possible options for auto-completion, based on the
settings of <em>index</em> and <em>select_by</em>.</p>
          
          

          
          <div class="method-source-code" id="options-source">
            <pre><span class="ruby-comment"># File lib/highline/menu.rb, line 263</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">options</span>(  )
  <span class="ruby-comment"># add in any hidden menu commands</span>
  <span class="ruby-ivar">@items</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-ivar">@hidden_items</span>)

  <span class="ruby-identifier">by_index</span> = <span class="ruby-keyword">if</span> <span class="ruby-ivar">@index</span> <span class="ruby-operator">==</span> <span class="ruby-value">:letter</span>
    <span class="ruby-identifier">l_index</span> = <span class="ruby-string">&quot;`&quot;</span>
    <span class="ruby-ivar">@items</span>.<span class="ruby-identifier">map</span> { <span class="ruby-node">&quot;#{l_index.succ!}&quot;</span> }
  <span class="ruby-keyword">else</span>
    (<span class="ruby-value">1</span> <span class="ruby-operator">..</span> <span class="ruby-ivar">@items</span>.<span class="ruby-identifier">size</span>).<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span> <span class="ruby-constant">String</span>(<span class="ruby-identifier">s</span>) }
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">by_name</span> = <span class="ruby-ivar">@items</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">first</span> }

  <span class="ruby-keyword">case</span> <span class="ruby-ivar">@select_by</span>
  <span class="ruby-keyword">when</span> <span class="ruby-value">:index</span> <span class="ruby-keyword">then</span>
    <span class="ruby-identifier">by_index</span>
  <span class="ruby-keyword">when</span> <span class="ruby-value">:name</span>
    <span class="ruby-identifier">by_name</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">by_index</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">by_name</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">ensure</span>
  <span class="ruby-comment"># make sure the hidden items are removed, before we return</span>
  <span class="ruby-ivar">@items</span>.<span class="ruby-identifier">slice!</span>(<span class="ruby-ivar">@items</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">-</span> <span class="ruby-ivar">@hidden_items</span>.<span class="ruby-identifier">size</span>, <span class="ruby-ivar">@hidden_items</span>.<span class="ruby-identifier">size</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-select" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">select</span><span
            class="method-args">( highline_context, selection, details = nil )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>This method processes the auto-completed user selection, based on the rules
for this <a href="Menu.html">Menu</a> object.  If an action was provided
for the selection, it will be executed as described in <a
href="Menu.html#method-i-choice">#choice</a>.</p>
          
          

          
          <div class="method-source-code" id="select-source">
            <pre><span class="ruby-comment"># File lib/highline/menu.rb, line 293</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">select</span>( <span class="ruby-identifier">highline_context</span>, <span class="ruby-identifier">selection</span>, <span class="ruby-identifier">details</span> = <span class="ruby-keyword">nil</span> )
  <span class="ruby-comment"># add in any hidden menu commands</span>
  <span class="ruby-ivar">@items</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-ivar">@hidden_items</span>)

  <span class="ruby-comment"># Find the selected action.</span>
  <span class="ruby-identifier">name</span>, <span class="ruby-identifier">action</span> = <span class="ruby-keyword">if</span> <span class="ruby-identifier">selection</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/^\d+$/</span>
    <span class="ruby-ivar">@items</span>[<span class="ruby-identifier">selection</span>.<span class="ruby-identifier">to_i</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>]
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">l_index</span> = <span class="ruby-string">&quot;`&quot;</span>
    <span class="ruby-identifier">index</span> = <span class="ruby-ivar">@items</span>.<span class="ruby-identifier">map</span> { <span class="ruby-node">&quot;#{l_index.succ!}&quot;</span> }.<span class="ruby-identifier">index</span>(<span class="ruby-identifier">selection</span>)
    <span class="ruby-ivar">@items</span>.<span class="ruby-identifier">find</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">first</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">selection</span> } <span class="ruby-keyword">or</span> <span class="ruby-ivar">@items</span>[<span class="ruby-identifier">index</span>]
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># Run or return it.</span>
  <span class="ruby-keyword">if</span> <span class="ruby-keyword">not</span> <span class="ruby-identifier">action</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-ivar">@highline</span> = <span class="ruby-identifier">highline_context</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@shell</span>
      <span class="ruby-identifier">result</span> = <span class="ruby-identifier">action</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">details</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">result</span> = <span class="ruby-identifier">action</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">name</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-ivar">@nil_on_handled</span> <span class="ruby-operator">?</span> <span class="ruby-keyword">nil</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">result</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">action</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-identifier">name</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">ensure</span>
  <span class="ruby-comment"># make sure the hidden items are removed, before we return</span>
  <span class="ruby-ivar">@items</span>.<span class="ruby-identifier">slice!</span>(<span class="ruby-ivar">@items</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">-</span> <span class="ruby-ivar">@hidden_items</span>.<span class="ruby-identifier">size</span>, <span class="ruby-ivar">@hidden_items</span>.<span class="ruby-identifier">size</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-to_ary" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_ary</span><span
            class="method-args">( )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Allows <a href="Menu.html">Menu</a> objects to pass as Arrays, for use with
HighLine.list(). This method returns all menu items to be displayed,
complete with indexes.</p>
          
          

          
          <div class="method-source-code" id="to_ary-source">
            <pre><span class="ruby-comment"># File lib/highline/menu.rb, line 330</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_ary</span>(  )
  <span class="ruby-keyword">case</span> <span class="ruby-ivar">@index</span>
  <span class="ruby-keyword">when</span> <span class="ruby-value">:number</span>
    <span class="ruby-ivar">@items</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;#{@items.index(c) + 1}#{@index_suffix}#{c.first}&quot;</span> }
  <span class="ruby-keyword">when</span> <span class="ruby-value">:letter</span>
    <span class="ruby-identifier">l_index</span> = <span class="ruby-string">&quot;`&quot;</span>
    <span class="ruby-ivar">@items</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;#{l_index.succ!}#{@index_suffix}#{c.first}&quot;</span> }
  <span class="ruby-keyword">when</span> <span class="ruby-value">:none</span>
    <span class="ruby-ivar">@items</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;#{c.first}&quot;</span> }
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@items</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;#{index}#{@index_suffix}#{c.first}&quot;</span> }
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-to_s" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_s</span><span
            class="method-args">( )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Allows <a href="Menu.html">Menu</a> to behave as a <a
href="../String.html">String</a>, just like <a
href="Question.html">Question</a>.  Returns the <em>layout</em> to be
rendered, which is used by HighLine.say().</p>
          
          

          
          <div class="method-source-code" id="to_s-source">
            <pre><span class="ruby-comment"># File lib/highline/menu.rb, line 348</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_s</span>(  )
  <span class="ruby-keyword">case</span> <span class="ruby-ivar">@layout</span>
  <span class="ruby-keyword">when</span> <span class="ruby-value">:list</span>
    <span class="ruby-string">&#39;&lt;%= if @header.nil? then &#39;</span><span class="ruby-string">&#39; else &quot;#{@header}:\n&quot; end %&gt;&#39;</span> <span class="ruby-operator">+</span>
    <span class="ruby-node">&quot;&lt;%= list( @menu, #{@flow.inspect},
                      #{@list_option.inspect} ) %&gt;&quot;</span> <span class="ruby-operator">+</span>
    <span class="ruby-string">&quot;&lt;%= @prompt %&gt;&quot;</span>
  <span class="ruby-keyword">when</span> <span class="ruby-value">:one_line</span>
    <span class="ruby-string">&#39;&lt;%= if @header.nil? then &#39;</span><span class="ruby-string">&#39; else &quot;#{@header}:  &quot; end %&gt;&#39;</span> <span class="ruby-operator">+</span>
    <span class="ruby-string">&quot;&lt;%= @prompt %&gt;&quot;</span> <span class="ruby-operator">+</span>
    <span class="ruby-node">&quot;(&lt;%= list( @menu, #{@flow.inspect},
                       #{@list_option.inspect} ) %&gt;)&quot;</span> <span class="ruby-operator">+</span>
    <span class="ruby-string">&quot;&lt;%= @prompt[/\s*$/] %&gt;&quot;</span>
  <span class="ruby-keyword">when</span> <span class="ruby-value">:menu_only</span>
    <span class="ruby-node">&quot;&lt;%= list( @menu, #{@flow.inspect},
                      #{@list_option.inspect} ) %&gt;&lt;%= @prompt %&gt;&quot;</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@layout</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-update_responses" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">update_responses</span><span
            class="method-args">( )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>This method will update the intelligent responses to account for <a
href="Menu.html">Menu</a> specific differences.  Calls the superclass&#39;
(Question&#39;s) build_responses method, overriding its default arguments
to specify &#39;options&#39; will be used to populate choice lists, and
that the newly built hash will predominate over the preexisting hash for
any keys that are the same.</p>
          
          

          
          <div class="method-source-code" id="update_responses-source">
            <pre><span class="ruby-comment"># File lib/highline/menu.rb, line 377</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">update_responses</span>(  )
  <span class="ruby-identifier">build_responses</span>(<span class="ruby-identifier">options</span>, <span class="ruby-keyword">true</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://docs.seattlerb.org/rdoc/">RDoc</a> 4.2.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

